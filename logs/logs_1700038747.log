[2023-11-15 16:59:07,016] logger_util.py->write_log line:61 [INFO] 
-------------接口请求开始-----------
[2023-11-15 16:59:07,016] logger_util.py->write_log line:61 [INFO] 接口名称：查询历史数据
[2023-11-15 16:59:07,016] logger_util.py->write_log line:61 [INFO] 接口方式：post
[2023-11-15 16:59:07,017] logger_util.py->write_log line:61 [INFO] 接口路径：http://127.0.0.1:18000/api/v1/data/aggregate
[2023-11-15 16:59:07,017] logger_util.py->write_log line:61 [INFO] 请求头：{'X-Project': 'cade0634c4a44304911e8cfdb1b8f8b9'}
[2023-11-15 16:59:07,017] logger_util.py->write_log line:61 [INFO] 请求参数：{'dataSetId': 'history', 'dimensions': [{'aliasName': '', 'fieldName': '0', 'sort': 2, 'timeFormat': 'yyyy-MM-dd HH:mm:ss'}], 'measures': [{'aliasName': '', 'fieldName': '19', 'mode': 4, 'dataFormat': 0, 'sort': 0, 'mergeType': 0}, {'aliasName': '', 'fieldName': '20', 'mode': 4, 'dataFormat': 0, 'sort': 0, 'mergeType': 0}, {'aliasName': '', 'fieldName': '28', 'mode': 4, 'dataFormat': 0, 'sort': 0, 'mergeType': 0}, {'aliasName': '', 'fieldName': '30', 'mode': 4, 'dataFormat': 0, 'sort': 0, 'mergeType': 0}], 'filters': [], 'total': False, 'pageSize': None, 'pageIndex': None, 'limit': 10000, 'noAggregation': False, 'noDimensions': False, 'whereJson': ''}
[2023-11-15 16:59:07,017] logger_util.py->write_log line:61 [INFO] 文件上传：None
[2023-11-15 16:59:07,093] logger_util.py->write_log line:61 [INFO] 预期结果：[{'equals': {'status_code': 200}}, {'equals': {'A1(4)': '1'}}, {'equals': {'A2(4)': '11'}}, {'equals': {'A10(4)': '10.456'}}, {'equals': {'A12(4)': '中文'}}]
[2023-11-15 16:59:07,094] logger_util.py->write_log line:61 [INFO] 实际结果：{'values': [{'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:59:06'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:59:05'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:59:04'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:59:03'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:59:02'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:59:01'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:59:00'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:59'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:58'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:57'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:56'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:55'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:54'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:53'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:52'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:51'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:50'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:49'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:48'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:47'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:46'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:45'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:44'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:43'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:42'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:41'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:40'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:39'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:38'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:37'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:36'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:35'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:34'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:33'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:32'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:31'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:30'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:29'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:28'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:27'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:26'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:25'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:24'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:23'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:22'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:21'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:20'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:19'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:18'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:17'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:16'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:15'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:14'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:13'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:12'}, {'A1(4)': '1', 'A2(4)': '11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:11'}, {'A1(4)': '1', 'A2(4)': '10', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:10'}, {'A1(4)': '1', 'A2(4)': '9', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:09'}, {'A1(4)': '1', 'A2(4)': '8', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:08'}, {'A1(4)': '1', 'A2(4)': '7', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:07'}, {'A1(4)': '1', 'A2(4)': '6', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:06'}, {'A1(4)': '1', 'A2(4)': '5', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:05'}, {'A1(4)': '1', 'A2(4)': '4', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:04'}, {'A1(4)': '1', 'A2(4)': '3', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:03'}, {'A1(4)': '1', 'A2(4)': '2', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:02'}, {'A1(4)': '1', 'A2(4)': '1', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:01'}, {'A1(4)': '1', 'A2(4)': '0', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:58:00'}, {'A1(4)': '1', 'A2(4)': '-1', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:57:59'}, {'A1(4)': '1', 'A2(4)': '-2', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:57:58'}, {'A1(4)': '1', 'A2(4)': '-3', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:57:57'}, {'A1(4)': '1', 'A2(4)': '-4', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:57:56'}, {'A1(4)': '1', 'A2(4)': '-5', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:57:55'}, {'A1(4)': '1', 'A2(4)': '-6', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:57:54'}, {'A1(4)': '1', 'A2(4)': '-7', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:57:53'}, {'A1(4)': '1', 'A2(4)': '-8', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:57:52'}, {'A1(4)': '1', 'A2(4)': '-9', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:57:51'}, {'A1(4)': '1', 'A2(4)': '-10', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:57:50'}, {'A1(4)': '1', 'A2(4)': '-11', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:57:49'}, {'A1(4)': '1', 'A2(4)': '-12', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:57:48'}, {'A1(4)': '1', 'A2(4)': '-13', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:57:47'}, {'A1(4)': '1', 'A2(4)': '-14', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:57:46'}, {'A1(4)': '1', 'A2(4)': '-15', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:57:45'}, {'A1(4)': '1', 'A2(4)': '-16', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:57:44'}, {'A1(4)': '1', 'A2(4)': '-17', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:57:43'}, {'A1(4)': '1', 'A2(4)': '-18', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:57:42'}, {'A1(4)': '1', 'A2(4)': '-19', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:57:41'}, {'A1(4)': '1', 'A2(4)': '-20', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:57:40'}, {'A1(4)': '1', 'A2(4)': '-21', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:57:39'}, {'A1(4)': '1', 'A2(4)': '-22', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:57:38'}, {'A1(4)': '1', 'A2(4)': '-23', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:57:37'}, {'A1(4)': '1', 'A2(4)': '-24', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:57:36'}, {'A1(4)': '1', 'A2(4)': '-25', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-15 16:57:35'}, {'A1(4)': '1', 'A2(4)': '-23', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-14 17:55:15'}, {'A1(4)': '1', 'A2(4)': '-24', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-14 17:55:14'}, {'A1(4)': '1', 'A2(4)': '-25', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-14 17:55:13'}, {'A1(4)': '1', 'A2(4)': '-26', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-14 17:55:12'}, {'A1(4)': '1', 'A2(4)': '-27', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-14 17:55:11'}, {'A1(4)': '1', 'A2(4)': '-28', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-14 17:55:10'}, {'A1(4)': '1', 'A2(4)': '-29', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-14 17:55:09'}, {'A1(4)': '1', 'A2(4)': '-30', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-14 17:55:08'}, {'A1(4)': '1', 'A2(4)': '-31', 'A10(4)': '10.456', 'A12(4)': '中文', '记录时间': '2023-11-14 17:55:07'}], 'mapping': [{'id': '19', 'name': 'A1(4)', 'aliasName': '', 'fieldName': 'A1', 'method': 4}, {'id': '20', 'name': 'A2(4)', 'aliasName': '', 'fieldName': 'A2', 'method': 4}, {'id': '28', 'name': 'A10(4)', 'aliasName': '', 'fieldName': 'A10', 'method': 4}, {'id': '30', 'name': 'A12(4)', 'aliasName': '', 'fieldName': 'A12', 'method': 4}, {'id': '_time', 'name': '_time', 'aliasName': '', 'fieldName': '_time', 'method': None}], 'queryTranslateResult': [{'queryString': '\r\na0 = from(bucket: "cade0634c4a44304911e8cfdb1b8f8b9")\r\n  |> range(start: 0, stop: now())\r\n  |> filter(fn: (r) => r["_measurement"] == "variables" and r["_field"]=="lval" and r["variable"] == "19")\r\n\r\n  |> group(columns: ["_measurement"])\r\n\n  |> limit(n: 10000)\n  |> set(key: "_field", value: "val")\n  |> toString()\r\n\r\na1 = from(bucket: "cade0634c4a44304911e8cfdb1b8f8b9")\r\n  |> range(start: 0, stop: now())\r\n  |> filter(fn: (r) => r["_measurement"] == "variables" and r["_field"]=="lval" and r["variable"] == "20")\r\n\r\n  |> group(columns: ["_measurement"])\r\n\n  |> limit(n: 10000)\n  |> set(key: "_field", value: "val")\n  |> toString()\r\n\r\na2 = from(bucket: "cade0634c4a44304911e8cfdb1b8f8b9")\r\n  |> range(start: 0, stop: now())\r\n  |> filter(fn: (r) => r["_measurement"] == "variables" and r["_field"]=="fval" and r["variable"] == "28")\r\n\r\n  |> group(columns: ["_measurement"])\r\n\n  |> limit(n: 10000)\n  |> set(key: "_field", value: "val")\n  |> toString()\r\n\r\na3 = from(bucket: "cade0634c4a44304911e8cfdb1b8f8b9")\r\n  |> range(start: 0, stop: now())\r\n  |> filter(fn: (r) => r["_measurement"] == "variables" and r["_field"]=="sval" and r["variable"] == "30")\r\n\r\n  |> group(columns: ["_measurement"])\r\n\n  |> limit(n: 10000)\n  |> set(key: "_field", value: "val")\n  |> toString()\r\n\r\nall = union(tables: [a0,a1,a2,a3])\r\n\r\n\r\nresult = all\r\n  |> pivot(rowKey:["_time"], columnKey: ["variable"], valueColumn: "_value")\r\n\r\n  |> sort(columns: ["_time"],desc:true)\r\n  |> rename(fn: (column) => if column=="19" then "M0" else if column=="20" then "M1" else if column=="28" then "M2" else if column=="30" then "M3" else column)\r\nresult\r\n', 'args': {}}], 'consuming': {'qcs': [54.4227]}, 'total': None}
[2023-11-15 16:59:07,096] logger_util.py->write_log line:61 [INFO] 接口请求成功！
[2023-11-15 16:59:07,096] logger_util.py->write_log line:61 [INFO] 
-------------接口请求结束-----------

